<IfModule mod_proxy.c>

    #here we can test http <-> https
    <VirtualHost proxyssl>
        #these are not on by default in the 1.x based mod_ssl
        <IfDefine APACHE2>
            SSLProxyEngine On
            SSLProxyMachineCertificateFile @SSLCA@/asf/proxy/client_ok.pem
            SSLProxyCACertificateFile @SSLCA@/asf/certs/ca.crt
            SSLProxyVerify on
            SSLProxyCARevocationFile @SSLCA@/asf/crl/ca-bundle.crl
        </IfDefine>


        ProxyPass        / https://@proxyssl_url@/
        ProxyPassReverse / https://@proxyssl_url@/
    </VirtualHost>


    #here we can test https <-> https
    <VirtualHost proxyssl_ssl>
        SSLEngine on

        #these are not on by default in the 1.x based mod_ssl
        <IfDefine APACHE2>
            SSLProxyEngine On
            SSLProxyMachineCertificateFile @SSLCA@/asf/proxy/client_ok.pem
            SSLProxyCACertificateFile @SSLCA@/asf/certs/ca.crt
            SSLProxyVerify on
            SSLProxyCARevocationFile @SSLCA@/asf/crl/ca-bundle.crl
        </IfDefine>


        ProxyPass        / https://@proxyssl_url@/
        ProxyPassReverse / https://@proxyssl_url@/
    </VirtualHost>

</IfModule>
